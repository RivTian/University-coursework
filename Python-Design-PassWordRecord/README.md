## 第零章、开发背景与环境

PC操作系统：Windows10 + Manjaro of Linux;

基本软件：使用 Visual Studio Code 结合 Python插件

Python版本：Python 3.8.2;

本次大作业引用的Python模块库：stmplib，email; PyQt5，PyQt5_tools，sqlite3数据库模块;

编码环境和编码风格严格遵守: flake8 和 yapf

 

## 第一章、目的和意义

我们的当代世界围绕各种在线服务进行旋转，以使人们的生活更轻松。说我们生活在以

服务为基础的世界中并不是一个错误。结果，用户每天必须召回几十（甚至更多）登录密码组合。 Facebook，Twitter，Netflix，Gmail，亚马逊和Snapchat仅举几例，是人们日常使用的最受欢迎的服务之一。根据微软研究院进行的调查，平均用户在2007年有25个在线账户 ，但随着可用的在线服务数量不断增加，用户的账户总数继续稳步增长。 8年后进行的研究证明了我们的假设：普通用户在2015年平均拥有90个账户 。如果这个数字自那时以来翻了一倍，那就不足为奇了。

​    与此同时，作为软件开发人员和当代学生，我们走遍地球并使用与普通用户相同的服务，清楚地意识到记住所有帐户的密码可能是一个挑战。所以我使用Python构建一个携带GUI页面的交互式Python编程应用的密码管理器。

​    并且构建代码实现数据库文件自动发送和备份至邮箱中。避免数据因故遗失

 

## 第二章、相关技术说明

核心技术点1: Python实现邮箱的自动化发送

Python有两个内置库：smtplib和email，能够实现邮件功能。

smtplib库负责发送邮件，email库负责构造邮件格式和内容。邮件发送需要遵守SMTP协议，

Python内置对SMTP的支持，可以发送纯文本邮件、HTML邮件以及带附件的邮件。



核心技术点2: 使用Python的PyQt5库进行简易的UI页面设计

打开designer.exe，看到的界面是这样的：

 

![img](https://cdn.jsdelivr.net/gh/Kanna-jiahe/blogimage/img/20210107115243.jpg)

可以看到预置了5个窗口模板，分别是三种形式的对话框、主窗口和widget。designer的主界面左边栏是控件，右边是对象查看器和属性编辑器。这里新建个Main window吧，它包含菜单栏、状态栏，还可以添加工具栏。在属性编辑器设置“windowTitle”属性值“测试窗口”，然后从左边拖拽一个按钮Push Button，设置它的text属性为“关闭”，保存文件为test.ui，点击菜单“Form”->"Preview"进行预览，结果如下图：

![img](https://cdn.jsdelivr.net/gh/Kanna-jiahe/blogimage/img/20210107115319.jpg)

 

在将所需要的窗体设计完成以后都保存在test.ui文件里，python是不能直接利用它的，我们需要使用pyuic5将它转换为py文件，打开cmd，进入test.py所在目录，执行命令pyuic5 -o ui_test.py test.ui，ui_test.py是产生的py文件。此时我们就可以用函数链接它并使用了。

 

 

## 第三章、应用程序功能分析

![img](https://cdn.jsdelivr.net/gh/Kanna-jiahe/blogimage/img/20210107115332.png)

程序主体逻辑图分析

 

 

使用GUI界面的主要用于应用程序的登录和注册，并用数据库保存用户的信息，但只是保存在本地的数据库文件中。

 

该GUI界面使用十分简单，与平常的网页版注册登录没有太多区别，另外有管理员的管理界面，可用于对所有用户的相关操作

![img](https://cdn.jsdelivr.net/gh/Kanna-jiahe/blogimage/img/20210107115343.jpg)

在管理员页面中可以便利的看到已经添加的用户名和密码，同时提供删除，清除，添加和修改操作。

 

当需要快速查看密码时可进入管理员页面查看，否则仅直接尝试登录即可验证是否用户名和密码正确。

![img](https://cdn.jsdelivr.net/gh/Kanna-jiahe/blogimage/img/20210107115349.jpg)

Main页面

  同时如果运行Auto_Mail模块的代码后将会自动启动SMTP邮箱服务器使我们设定的邮件发送备份数据库文件和相应文本文字至备份邮箱空间。

![img](https://cdn.jsdelivr.net/gh/Kanna-jiahe/blogimage/img/20210107115407.jpg)

程序运行结果

本次编码涵盖一般算法（例如搜索）、列表和字典等、程序的三种结果（用Python实现）函数的调用、面向对象的类。

其中，本次编码类对象和函数调用使用频繁

 

 

## 第四章、应用程序详细设计



![display01](https://cdn.jsdelivr.net/gh/Kanna-jiahe/blogimage/img/20210107115135.gif)



关于邮件发送的gif动态演示图

 

![img](https://cdn.jsdelivr.net/gh/Kanna-jiahe/blogimage/img/20210107115415.png)

1、Login.py

该模块主要负责用户的登录，以及与其他窗口的联系，使用时应该注意安装PyQt5模块，如果没有安装则会调用os模块使用pip进行安装，若安装失败，则无法进行下一步，但是还是建议自己先配置好pyqt5的环境。

关于PyQt5的安装建议使用国内镜像源可以使安装速度大幅提升

1. pip install 【所需安装的库名】 -i https://pypi.tuna.tsinghua.edu.cn/simple 

2. 或者修改Pip的安装源，详细方法在参考文献中

2、Sign_Up.py

该模块主要负责用户的注册，注册时候必须两次输入的密码相同并且用户名不存在方可成功注册，否则提示用户名已经存在，并要求重新填写，注册完成之后，窗口关闭，返回之前的登录窗口。

 

3、Admin.py

该模块负责管理员对所有用户的操作，包括删除，修改密码，添加用户等;

 

删除用户的时候，需要选择前面的选择框，然后点击Delete， Select All可方便一次性选择全部，点击之后变为Unselect,可用于不选择任何用户，Clear可一次性删除全部，包括admin，但是之后仍会自动生成admin并设置好默认密码，Refresh可以更新表格，将数据库中的数据重新添加到表格中，Update必须对应已有的用户名，否则报错提示，Add可以实现添加用户，但必须是数据库中没有的用户，Show可以用于添加用户时的密码框文本是否显式显示出来，点击之后变为Hide。

 

4、Database.py

为操作数据库提供接口，可实现插入数据，获取数据，以用户名查找密码，以用户名更新密码，以用户名删除数据，清空数据库等功能。

 

5、Main.py 

该模块为用户登录后所看到的界面，可由自己自定义设置，在这里并没有过多的设置，只是展现一个图像，提示用户名与密码验证完成。

 

6、Auto_Mail.py

该模块实现了自动化邮件发送，同时具有一定格式，可以在邮件中设定数据库版本号，以便后期的快速维护数据。

 

  

## 第五章、总结

(1)本次大作业收获很大,虽然技术有待提高,但可以说是用心了,对Python编程有了新的认识,且在这个过程提高了自身的水平

(2)通过这次大作业对Python有了许多新的认识,活用书本的知识是不易的,程序的编写也是要经过数次的分析、思考和修正的,我们利用Python解决实际问题的能力得到了提升,理论知识也得以在实践中运用。

(3)由于时间和技术的问题，主页面并没有进行相关的详细设置，显得比较简陋，部分代码也稍微冗余，可以进行更加细致的模块化重构代码来减少代码量。

(4)这次设计的应该实用性强应用价值高, 保密的最安全的地方是密码管理器。将导出的文件存储在计算机上的秘密文件夹中似乎是个好主意，但事实并非如此，所以我将数据文件以二进制存储在db文件并发送至邮箱的加密空间进行保护。

(5) 个人觉得本次项目的一个进阶点是将数据库中的文件转化至.CSV文件中，这会很方便，因为目前软件市场上主流的受信任的密码管理器都支持此文件格式，这样可以轻松加载和备份拥有帐户的每个网站保存登录凭据和快速登录至应用中。

(6) 一点点感悟就是：在学习压力最大的时候，感觉自己什么都做不出来的时候，其实也是最有可能突破的时候。如果说要什么时候开始是最好的话，那就是现在。

## 参考文献

1、 [Python pip下载国外模块下载失败和速度慢的解决方法](https://www.cnblogs.com/RioTian/p/14234504.html)

2、 [Python库PyQt5的使用方法](https://zhuanlan.zhihu.com/p/34290435)

3、[Python关于简易数据库的编写](https://www.liaoxuefeng.com/wiki/897692888725344/945671347631136)