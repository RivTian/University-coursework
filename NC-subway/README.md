# 南昌地铁票价计算

### 功能展示

![Run result display](https://gitee.com//riotian/blogimage/raw/master/img/20200802153050.jpg)

### 实现方法

1. 整个功能的具体逻辑也就这里，从中不难发现，我们所需的地铁数据应该得有的，而且还有所需的各站点之间的距离。（**当然我这里是利用地铁各站点间的距离来模拟实现查询票价，如果各开发者有更好的idea，欢迎交流** ）

   ```
   1号线:
   双港站 0.0
   孔目湖站 1.2
   长江路站 3.0
   珠江路站 1.2
   庐山南大道站 1.5
   绿茵路站 0.8
   卫东站 1.2
   地铁大厦站 1.0
   秋水广场站 0.9
   滕王阁站 2.0
   万寿宫站 0.8
   八一馆站 0.6
   八一广场站 1.1
   丁公路北站 1.0
   师大南路站 1.1
   彭家桥站 0.9
   谢家村站 0.7
   青山湖大道站 0.8
   高新大道站 1.1
   艾溪湖西站 1.3
   艾溪湖东站 1.9
   太子殿站 1.7
   奥体中心站 1.4
   瑶湖西站 1.3 
   
   2号线:
   南路站 0.0
   大岗站 0.9
   生米站 1.3
   九龙湖南站 0.9
   市民中心站 1.6
   鹰潭街站 0.7
   国博站 1.4
   西站南广场站 1.6
   南昌西站 0.7
   龙岗站 1.1
   国体中心站 1.7
   卧龙山站 1.2
   岭北站 1.3
   前湖大道站 1.3
   学府大道东站 0.9
   翠苑路站 1.6
   地铁大厦站 1.5
   雅苑路站 0.9
   红谷中大道站 1.1
   阳明公园站 2.6
   青山路口站 1.0
   福州路站 0.7
   八一广场站 0.7
   永叔路站 0.9
   丁公路南站 0.6
   南昌火车站 1.0
   顺外站 0.7
   辛家庵站 1.4 
   ```

2. 得到了以上具体的数据后，我们便可以先实现让客户选择起始站和终点站：

   ```
   while (1) {
           printf("\n请问是否需要显示所有站点信息 ？（1 是，0 否）\n"); cin >> Exit;
           if (Exit == "1" || Exit == "是") PrintLine();
           cout << "请输入起点站：（如 1号线 双港站）\n"; cin >> stst.ID >> stst.name; cout << endl;
           cout << "请输入终点站：                 \n"; cin >> endst.ID >> endst.name; cout << endl;
   
           int si = Checkindex(stst), ti = Checkindex(endst);
           //错误站名处理
           if (si == -1 || ti == -1) {
               cout << "站名输入错误，请重新输入\n" << endl;
               continue;
           }
   
           double Distance = GetDis(si, ti);
           cout << stst.name << " -> " << endst.name << "两站最短距离为：" << Distance << endl;
   
           if (stst.name == endst.name) {
               printf("\n亲，您真的需要坐地铁么？\n");
               printf("请重新输入信息\n\n");
               continue;
           }
   
           cout << "请输入乘坐人数:           \n"; cin >> people; cout << endl;
   
           //引用计算distance的函数（类，使用BFS disjtra floyd寻找最短路）
           countMoney(people, Distance);//计算金额时候向上取
   
           cout << "是否继续使用票价查询系统 ？（1 是，0 否)";
           cout << endl << endl; cin >> Exit;
           if (Exit == "0" || Exit == "否") {
               system("cls");
               printf("********************************************************************************************************\n");
               printf("                                   南昌地铁路线查询系统已经安全退出\n");
               printf("                       Nanchang subway route query system has been safely exited\n");
               printf("********************************************************************************************************\n");
               printf("\n\n\n\n\n\n\n\n\n\n");
               return;
           }
           else
               system("cls");
       }
   ```

3. 得到了我们想要去的线路以及站点后，我们便可以点击查询具体的数值了。其实，在我们选择站点的时候，我们有时会出现这样一种情况，那就是点击选择了相同的站点。我们知道在实际中，选择了相同的站点就相当于在原地不动，这是没有任何意义的。不过在我们开发中，要对这种情况进行处理：

   ```
   if (stst.name == endst.name) {
               printf("\n亲，您真的需要坐地铁么？\n");
               printf("请重新输入信息\n\n");
               continue;
           }
   ```

4. 处理了相同站点的情况后，剩下的就只是选择不同站点了，那么不同的站点之间的路程以及费用又该怎么计算呢？这时，本人运用了Floyd算法（关于该算法之后在本人博客中详细介绍），获取到想要两个站点之间的最短路径：

   ```
   Floyd(max_n);
   ```

当然我这是基于最优用户体验来思考，因为一般人就会选择要去地方的最短距离，如果有人说闲得没事，想寻求最长距离，那么就得用另一番逻辑来思考了。得到了我们需要的最短路径后，便可求出具体的费用以及距离了。 5. 在计算具体费用时，本人查阅了最新地铁收费标准，计算出真实费用：

```
if (dis >= 0 && dis <= 6)  Paymoney = people * 2;
else if (dis <= 12) Paymoney = people * 3;
else if (dis <= 20) Paymoney = people * 4;
else if (dis <= 28) Paymoney = people * 5;
else Paymoney = people * (5 + ceil((dis - 28) / 10));
```

### 总结 

关于这个地铁票价查询，存在着很多不足，本人后期也会继续慢慢完善。当然，更欢迎广大开发者看到本人的作品，能提出您宝贵的意见和建议。最后，对于本人的作品您支持的话，谢谢给个小小的star~。